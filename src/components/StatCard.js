import React from "react";
import { StyleSheet, Text, TouchableOpacity, View } from "react-native";
import _ from "lodash";

import LinearGradient from "react-native-linear-gradient";
import { cardType } from "../constants/enums";

export default function StatCard(props) {
  var colors;
  const { stat, onPress, style, cardType: type } = props;
  switch (type) {
    case cardType.PRIMARY:
      colors = ["#37A6FA", "#0058E6"];
      break;
    default:
      colors = ["#03C9A9", "#01AF95"];
  }
  const votesMessage = stat.votes === 1 ? "vote" : "votes";
  return (
    <TouchableOpacity onPress={() => onPress(stat)}>
      <LinearGradient colors={colors} style={[style, styles.container]}>
        <View
          style={{
            flex: 1,
            flexDirection: "row",
            justifyContent: "space-between"
          }}
        >
          <View style={{ flexDirection: "column" }}>
            <Text style={styles.statTitle}>{_.capitalize(stat.title)}</Text>
            {stat.voted && (
              <View
                style={{
                  flexDirection: "row",
                  alignSelf: "flex-start",
                  ...styles.label,
                  marginTop: 3
                }}
              >
                <Text style={styles.subtitle}>{`${stat.voted.value}`}</Text>
              </View>
            )}
          </View>
          <View style={{ flexDirection: "column" }}>
            <Text style={styles.statValue}>{stat.value}</Text>
            <Text style={{ ...styles.subtitle, textAlign: "right" }}>
              {stat.votes} {votesMessage}
            </Text>
          </View>
        </View>
      </LinearGradient>
    </TouchableOpacity>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: "blue",
    flexDirection: "row",
    justifyContent: "space-between",
    padding: 10,
    maxHeight: 80,
    alignItems: "center",
    borderRadius: 5
  },
  statTitle: {
    color: "white",
    fontSize: 16,
    fontWeight: "bold"
  },
  statValue: {
    color: "white",
    fontSize: 40,
    textAlign: "right"
  },
  subtitle: {
    color: "white",
    fontWeight: "600"
  },
  label: {
    paddingHorizontal: 5,
    paddingVertical: 2.5,
    backgroundColor: "rgba(52, 52, 52, 0.2)",
    borderRadius: 5
  }
});
